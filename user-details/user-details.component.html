<div class="page-layout carded fullwidth">

  <!-- TOP BACKGROUND -->
  <div class="top-bg linear-gradient-bg"></div>
  <!-- / TOP BACKGROUND -->

  <!-- CENTER -->
  <div class="center">

    <!-- CONTENT HEADER -->
    <!-- HEADER -->
    <div class="header mat-cyan-700-bg p-16 p-sm-24" fxLayout="column" fxLayoutAlign="center center">

      <div class="hero-text text-centered">
          <h2 [@animate]="{value:'*',params:{delay:'100ms', y:'25px'}}" class="text-centered">
              User Details and Information
          </h2>
      </div>

    </div>
    <!-- / HEADER -->
    <!-- / CONTENT HEADER -->

    <!-- CONTENT CARD -->
    <div class="content-card mat-white-bg">

      <!-- CONTENT -->
      <div class="content p-24">
        <form (ngSubmit)="onSubmit()" #userForm="ngForm">
          <div class="form-group">
            <mat-form-field>
              <input matInput matInput type="text"
                      class="form-control"
                      placeholder="First name"
                      id="firstName"
                      name="firstName"
                      [(ngModel)]="u.first_name" 
                      #firstname="ngModel"
                      required>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
              <input matInput matInput type="text" 
                      class="form-control" 
                      placeholder="Last name" 
                      id="lastName"
                      name="lastName"
                      [(ngModel)]="u.last_name"
                      #lastName="ngModel"
                      required>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
              <input matInput [matDatepicker]="dateOfBirth"
                     id="dob"
                     name="dob"
                     placeholder="Date of birth"
                     [ngModel]="date_of_birth"
                     #dob="ngModel"
                     required>
                <mat-datepicker-toggle matSuffix [for]="dateOfBirth"></mat-datepicker-toggle>
                <mat-datepicker #dateOfBirth startView="multi-year" [startAt]="date_of_birth"></mat-datepicker>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
              <mat-select matSelect
                          class="form-control" 
                          placeholder="Sex" 
                          id="sexChoice"
                          name="sexChoice"
                          [ngModel]="sex"
                          #sexChoice="ngModel">
                <mat-option *ngFor="let s of sexOpts" [value]="s">{{s}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
              <mat-select matSelect
                          class="form-control"
                          placeholder="Race" 
                          id="ethnic"
                          name="ethnic"
                          [ngModel]="race"
                          #ethnic="ngModel">
                <mat-option *ngFor="let r of raceOpts" [value]="r">{{r}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <button mat-raised-button color="accent" class="btn btn-success" (click)="updateUser(userForm.form)" [disabled]="!userForm.form.valid || userForm.form.pristine">Submit Changes</button>

        </form>

        <div [hidden]="!submitted">
          <h2 class="primary">Your changes have been successfully submitted</h2>
        </div>
          
      </div>
      <!-- / CONTENT -->

      <!-- TABLE -->
      <div class="content p-24">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 history-table">
          <ng-container matColumnDef="date">
            <th mat-hader-cell *matHeaderCellDef> Date </th>
            <td mat-cell *matCellDef="let history">{{history.date}}</td> 
          </ng-container>
          <ng-container matColumnDef="title">
            <th mat-hader-cell *matHeaderCellDef> Lesson Name </th>
            <td mat-cell *matCellDef="let history">{{history.title}}</td> 
          </ng-container>
          <ng-container matColumnDef="fract">
            <th mat-hader-cell *matHeaderCellDef> Raw Score </th>
            <td mat-cell *matCellDef="let history">{{history.fract}}</td> 
          </ng-container>
          <ng-container matColumnDef="percentage">
            <th mat-hader-cell *matHeaderCellDef> Percentage </th>
            <td mat-cell *matCellDef="let history">{{history.percentage}}</td> 
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
      <!-- / TABLE -->
    </div>
    <!-- / CONTENT CARD -->
    <br>
    <br>
    <!-- <button mat-raised-button color="accent" class="btn btn-success" (click)="clearUser()">Clear User Data</button> -->

  </div>
  <!-- / CENTER -->
</div>

